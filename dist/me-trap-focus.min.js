!function(t,e){"function"==typeof define&&define.amd?define(["meTools"],e):"object"==typeof exports?module.exports=e(meTools):t.meTrapFocus=e(meTools)}(this,function(t){function e(e,a){var i=this,c=e&&t.getElementById(e);if(!c)throw new Error("meTrapFocus: Container element not found");n.call(i).options=t.mergeObjects(h,a),i.container=c,c.getAttribute("tabindex")||c.setAttribute("tabindex","-1"),t.registerEvent(i,c,"keydown",function(t){o.call(i,t)}),r.call(i)}function n(){var t=this;return t.options={},t.container=null,t.focusables=[],t}function o(t){if(!t.ctrlKey&&!t.altKey){var e=t.keyCode?t.keyCode:t.which;if(e==f){var n,o=this,a=o.options.taboutIndicator,r=o.focusables;t.shiftKey?(n=c.call(o,-1),(n[n[0].matches(a)?1:0]===t.target||r.indexOf(t.target)<r.indexOf(n[0])||t.target===o.container)&&(u.call(o,n),t.preventDefault())):(n=c.call(o,1),(n[n.length-(n[n.length-1].matches(a)?2:1)]===t.target||r.indexOf(t.target)>r.indexOf(n[n.length-1]))&&(l.call(o,n),t.preventDefault()))}}}function a(e){var n=t.getAncestors(e,"form",!0)||document,o=e.getAttribute("name");return[].slice.call(n.querySelectorAll('input[type="radio"][name="'+o+'"]'))}function r(){var e=this,n=e.options,o=function(t){s.call(e,t)};e.focusables=i(e.container.querySelectorAll(n.focusableSelector));for(var a=0;a<e.focusables.length;a++){var r=e.focusables[a];r.matches(n.taboutIndicator)&&(t.unregisterEvent(e,r,"focus"),t.registerEvent(e,r,"focus",o))}return e}function i(t){for(var e=[],n=[],o=0;o<t.length;o++){var a=t[o],r=Math.max(0,a.getAttribute("tabindex")||0);e[r]=e[r]||[],e[r].push(a)}for(var i in e)for(var c in e[i])n.push(e[i][c]);return n}function c(t){t="undefined"==typeof t?1:t;for(var e=this,n=e.focusables,o=[],r=[],i=0;i<n.length;i++){var c=n[i],l=null;c.getAttribute("tabindex")||0;if(c.matches(":not([disabled])")&&c.matches(':not([tabindex="-1"])')&&(c.offsetWidth||c.offsetHeight))if(c.matches('input[type="radio"]')){if(r.indexOf(c)===-1){var u=a.call(e,c),s=null;r=r.concat(u);for(var f=0;f<u.length;f++){var h=u[f];if(h.checked){s=h;break}}s||(s=t===-1?u[u.length-1]:u[0]),l=s}}else l=c;l&&o.push(l)}return o}function l(t){var e=this,n=e.options.taboutIndicator,o=t[0];o.matches(n)&&(o=t[1]),o.matches("iframe")?setTimeout(function(){o.contentWindow.focus()},100):o.focus()}function u(t){var e=this,n=e.options.taboutIndicator,o=t[t.length-1];o.matches(n)&&(o=t[t.length-2]),o.matches("iframe")?setTimeout(function(){o.contentWindow.focus()},100):o.focus()}function s(t){var e=this,n=t.target,o=c.call(e,1),a=c.call(e,-1);n==a[0]?u.call(e,a):n==o[o.length-1]&&l.call(e,o)}var f=9,h={focusableSelector:"a,frame,iframe,input:not([type=hidden]),select,textarea,button,*[tabindex]",taboutIndicator:".me-tabout"};return e.prototype.update=function(){return r.call(this)},e.prototype.getFocusables=function(){return t.copyValues(this.focusables,!1)},e.prototype.getTabable=function(e){return t.copyValues(e?c.call(this,-1):c.call(this,1),!1)},e.prototype.destroy=function(){var e=this;return n.call(e),t.unregisterEvent(e),null},e});
/**
 * @license me-trap-focus 2.0.0 Copyright (c) Mandana Eibegger <scripts@schoener.at>
 * Available via the MIT license.
 * see: https://github.com/meibegger/me-trap-focus for details
 */

//# sourceMappingURL=me-trap-focus.min.js.map
urceMappingURL=me-trap-focus.min.js.map

/**
 * @license me-trap-focus 1.0.1 Copyright (c) Mandana Eibegger <scripts@schoener.at>
 * Available via the MIT license.
 * see: https://github.com/meibegger/me-trap-focus for details
 */

/**
 * @license me-trap-focus 2.0.0 Copyright (c) Mandana Eibegger <scripts@schoener.at>
 * Available via the MIT license.
 * see: https://github.com/meibegger/me-trap-focus for details
 */

/**
 * @license me-trap-focus 2.0.0 Copyright (c) Mandana Eibegger <scripts@schoener.at>
 * Available via the MIT license.
 * see: https://github.com/meibegger/me-trap-focus for details
 */

/**
 * @license me-trap-focus 3.0.0 Copyright (c) Mandana Eibegger <scripts@schoener.at>
 * Available via the MIT license.
 * see: https://github.com/meibegger/me-trap-focus for details
 */
